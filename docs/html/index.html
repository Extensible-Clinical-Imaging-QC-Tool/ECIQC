<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECIQC: Extensible Clinical Imaging Quality Control Tool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECIQC
   </div>
   <div id="projectbrief">The primary purpose of the tool is to automatically                           vaildate the DICOM images using for medical research.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Extensible Clinical Imaging Quality Control Tool </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md26">Overview</a></li>
<li class="level2"><a href="#autotoc_md27">Installation</a><ul><li class="level3"><a href="#autotoc_md28">Where does it run?</a></li>
<li class="level3"><a href="#autotoc_md29">First run</a><ul><li class="level4"><a href="#autotoc_md30">Linux</a></li>
<li class="level4"><a href="#autotoc_md31">Mac OS</a></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md32">Command Line Interface (CLI) Tool</a></li>
<li class="level2"><a href="#autotoc_md33">How to test on your own machine (Update 18th May 2023)</a><ul><li class="level3"><a href="#autotoc_md34">Choice1: Using python script to test with the local senders and receivers.</a></li>
<li class="level3"><a href="#autotoc_md35">Choice2: Using the executable file with more flexibility</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md36">Feedback and suggestions</a></li>
<li class="level2"><a href="#autotoc_md37">Task sheet for the first week</a></li>
</ul>
</ul>
</div>
<div class="textblock"><h2><a class="anchor" id="autotoc_md26"></a>
Overview</h2>
<p>This repository contains the ECIQC tool developed between SABS:R3, University of Oxford and GE Healthcare. The primary purpose of the tool is to automatically vaildate the DICOM images using for medical research.</p>
<p>The project is under active development.</p>
<p>This project has made use of the Oxford RSE C++ template.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Installation</h2>
<h3><a class="anchor" id="autotoc_md28"></a>
Where does it run?</h3>
<p>We expect this project to be usable on all modern systems It is regularly tested on the following operating systems:</p>
<ul>
<li>Linux: Ubuntu 14.04</li>
</ul>
<p>and with the following C++ compilers/toolchains:</p>
<ul>
<li>GCC 5.x, 6.x, 7.x</li>
<li>Clang 4.x, 5.x</li>
</ul>
<h3><a class="anchor" id="autotoc_md29"></a>
First run</h3>
<h4><a class="anchor" id="autotoc_md30"></a>
Linux</h4>
<ul>
<li>Download ECIQC github repository</li>
</ul>
<div class="fragment"><div class="line">git clone https://github.com/Extensible-Clinical-Imaging-QC-Tool/ECIQC.git</div>
<div class="line">cd ECIQC/</div>
</div><!-- fragment --><ul>
<li>Install <a href="https://cmake.org/download/">CMake</a> and a C++ compiler and other dependencies. This can be done using the install_dependencies file found in /scripts.</li>
</ul>
<div class="fragment"><div class="line">./scripts/install_dependencies.sh</div>
</div><!-- fragment --><ul>
<li>Make a build directory and configure the project. E.g. Assuming you are in a directory containing the source code:</li>
</ul>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
</div><!-- fragment --><ul>
<li>Compile the project</li>
</ul>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><ul>
<li>Run all the tests using CTest (this is bundled with CMake)</li>
</ul>
<div class="fragment"><div class="line">ctest --output-on-failure</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md31"></a>
Mac OS</h4>
<ul>
<li>Download ECIQC github repository</li>
</ul>
<div class="fragment"><div class="line">git clone https://github.com/Extensible-Clinical-Imaging-QC-Tool/ECIQC.git</div>
<div class="line">cd ECIQC/</div>
</div><!-- fragment --><ul>
<li>Install <a href="https://cmake.org/download/">CMake</a> and a C++ compiler and other dependencies. This can be done using the install_dependencies file found in /scripts.</li>
</ul>
<div class="fragment"><div class="line">brew install dcmtk boost cmake opencv tesseract</div>
</div><!-- fragment --><ul>
<li>Make a build directory and configure the project. E.g. Assuming you are in a directory containing the source code:</li>
</ul>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
</div><!-- fragment --><ul>
<li>Compile the project</li>
</ul>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><ul>
<li>Run all the tests using CTest (this is bundled with CMake)</li>
</ul>
<div class="fragment"><div class="line">ctest --output-on-failure</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32"></a>
Command Line Interface (CLI) Tool</h2>
<ul>
<li>An interface containing a simple application to receive and send DICOM images. To use the CLI, run the code from the source directory:</li>
</ul>
<div class="fragment"><div class="line">./build/exe/qctool</div>
</div><!-- fragment --><ul>
<li>To configure sender and receiver parameters, run the code:</li>
</ul>
<div class="fragment"><div class="line">./build/exe/qctool --help</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
How to test on your own machine (Update 18th May 2023)</h2>
<p>After you've cloned the package and installed it properly, we provide two alternatives to test whether it works on your own machine.</p>
<h3><a class="anchor" id="autotoc_md34"></a>
Choice1: Using python script to test with the local senders and receivers.</h3>
<p>There's a python script <a href="pipelinetest_main.py">pipelinetest.py</a> as a simple test tool. To run this script properly, you need to install two packages <a href="https://pydicom.github.io">pydicom&gt;=2.3.1</a> and <a href="https://pydicom.github.io/pynetdicom/stable/">pynetdicom&gt;=2.0.2</a>. For example, if you're using a linux system, you can create a virtual environment <b>in the root directory</b> and then install these two packages.</p>
<div class="fragment"><div class="line">python -m venv venv</div>
<div class="line">source ./venv/bin/activate</div>
<div class="line">pip install pydicom</div>
<div class="line">pip install pynetdicom</div>
</div><!-- fragment --><p> Make sure that <code>python</code> command means <code>python3</code> if you are using a linux system (This is also a prerequisite when running the test script). Otherwise, add <code>python</code> as an alias by typing &lsquo;alias python='python3&rsquo;` in your command line.</p>
<p>Finally, you will be happy to run the test script by <code>python pipelinetest_main.py</code> in the root directory. Remember to check the postprocessed files and logs in the ./result and ./result_quarantine. Please also note that we've used the <a href="schema/PipelineCase.json">PipelineCase.json</a> as the configuration file.</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Choice2: Using the executable file with more flexibility</h3>
<p>If you need more flexible test (for example, use non-local sender and receiver, or use your own datasets), we recommend to use the executable file. Before spinning up the pipeline, you need to create a directory ./result to store the logging file, and set up the configuration file properly. Have a look at the <a href="schema/PipelineCase.json">PipelineCase.json</a> and modify the hostname and port number according to your own system.</p>
<p>Also, we've noticed that the sender and receiver need to agree on specific abstract syntaxes and transfer syntaxes. The syntaxes we're supporting now are listed as follows. We'll come back to the syntax issue in June and July.</p>
<p>CTImageStorage (1.2.840.10008.5.1.4.1.1.2): LittleEndianExplicit, LittleEndianImplicit; MRImageStorage (1.2.840.10008.5.1.4.1.1.4): LittleEndianExplicit, LittleEndianImplicit; SecondaryCaptureImageStorage (1.2.840.10008.5.1.4.1.1.7): LittleEndianExplicit, LittleEndianImplicit; DigitalXRayImageStorageForPresentation (1.2.840.10008.5.1.4.1.1.1.1): LittleEndianImplicit; UltrasoundMultiframeImageStorage (1.2.840.10008.5.1.4.1.1.3.1): JPEGProcess1TransferSyntax.</p>
<p>Once you've done all the preparation work, now type in <code>./build/exe/qctool --config-file YourOwnConfig.json</code> to start the pipeline. Also remember to start your remote/local sender and receiver.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Feedback and suggestions</h2>
<p>If you have any feedback or suggestions about this project, please get in touch or open an issue.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Task sheet for the first week</h2>
<p>Step 1: Read through the introduction page and install the ECIQC on your Linux system/macOS system. Step 2: Try to run the pipeline with executable files and python file. Step 3: Check the output logging file in the ./results directory. Can you understand what's happending Step 4: Read through the tutorials and configuration galleries. Step 5: Explain the difference between OVERWRITE, INSERT, OVERWRITE. Write down the behaviour of INSERT when tag exists, and 0VERWRITE when the tag does not exists. Step 6: Read through MultipleConditionCaseShort.json file (this is a simplified version of Schema 4). Try to write down the full json file for schema 4 provided by Chris. (Bonus) Test with real case. Step 7: Download a DICOM file. Understand different components in the DICOM file. Can you visualise the image using Python/ Step 8: Understand how to update the documents by running dOxygen. Update your findings to the tutorial. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
