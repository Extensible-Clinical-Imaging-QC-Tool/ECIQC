<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECIQC: Tutorials</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ECIQC
   </div>
   <div id="projectbrief">The primary purpose of the tool is to automatically                          vaildate the DICOM images using for medical research.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tutorials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md11">First Example</a><ul><li class="level3"><a href="#autotoc_md12">Example codes</a></li>
<li class="level3"><a href="#autotoc_md13">Explanation</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md14">Receiver, Destination and Quarantine</a></li>
<li class="level2"><a href="#autotoc_md15">MetaData</a><ul><li class="level3"><a href="#autotoc_md16">Basic syntax within DICOM tags</a></li>
<li class="level3"><a href="#autotoc_md17">Operation types</a><ul><li class="level4"><a href="#autotoc_md18">Comparison Operators ==,&lt;=,&gt;=</a></li>
<li class="level4"><a href="#autotoc_md19">Logical Operators NOT, AND, ALL</a></li>
<li class="level4"><a href="#autotoc_md20">Actions</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md21">Multiple operations</a><ul><li class="level4"><a href="#autotoc_md22">Repeated keys</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md23">Nested operations</a></li>
<li class="level3"><a href="#autotoc_md24">Miscellaneous</a><ul><li class="level4"><a href="#autotoc_md25">Operations cheat sheet</a></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md26">Presentation context and transfer syntax</a></li>
</ul>
</ul>
</div>
<div class="textblock"><p>ECIQC is a flexible framework for medical imaging quality control. Users can teach it what to do by writing configuration files. In this tutorial, we are going to introduce how to specify proper configuration files at successively increasing levels of details. This tutorial is suitable for both non-developers (end-users) and developers new to this software. At the end of this tutorial, you will learn</p><ul>
<li>General syntaxes of configuration files;</li>
<li>How to modify the example configuration files to cater to users' needs;</li>
<li>How to start from strach to write proper configuration files.</li>
</ul>
<p>Here are some common scenarios proposed by Chris from GE Healthcare. You can find the corresponding configuration codes in configuration gallery page.</p><ul>
<li>Case1: check whether the patient name is a 6-digit number. If so, insert the patient name to clinical trial subject id; reject otherwise.</li>
<li>Case2: check whether the clinical trial protocol id is 3 letters followed by 6 digits. If so, prepend the patient name with "_" and clinical trial protocol id, reject otherwise.</li>
<li>Case3: check whether the date of birth is a 8-digit number. Replace the day with 30 and month with 06 if so.</li>
<li><p class="startli">Case4: check whether the modality is 'MR'. If so, check whether the manufacturer is 'SIEMENS' or 'HITACHI'. If that's true, check whether the magnetic field strenght equals 1.5 or 3.0. Set the clinical trial series description to T1 if all these conditions are satisfied; reject otherwise.</p>
<p class="startli">We recommend the readers to read through this tutorial and the configuration gallery for a better understanding.If you have any questions, please refer to FAQ page first. If not solved, please email to Yiming Wei(<a href="#" onclick="location.href='mai'+'lto:'+'yim'+'in'+'g.w'+'ei'+'@dt'+'c.'+'ox.'+'ac'+'.uk'; return false;">yimin<span style="display: none;">.nosp@m.</span>g.we<span style="display: none;">.nosp@m.</span>i@dtc<span style="display: none;">.nosp@m.</span>.ox.<span style="display: none;">.nosp@m.</span>ac.uk</a>) or Dr. Martin Robinson (<a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ti'+'n.r'+'ob'+'ins'+'on'+'@dt'+'c.'+'ox.'+'ac'+'.uk'; return false;">marti<span style="display: none;">.nosp@m.</span>n.ro<span style="display: none;">.nosp@m.</span>binso<span style="display: none;">.nosp@m.</span>n@dt<span style="display: none;">.nosp@m.</span>c.ox.<span style="display: none;">.nosp@m.</span>ac.u<span style="display: none;">.nosp@m.</span>k</a>) for help. </p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
First Example</h2>
<p>Configuration files are written in json format. Please refer to the mainpage for spinning up the ECIQC. You can specify your own configuration files by typing in the following codes in the command line: </p><div class="fragment"><div class="line">./build/exe/qctool --config-file &lt;your_configuration_file.json&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md12"></a>
Example codes</h3>
<p>We illustrate the basic components with a simple configuration file. </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;receiver&quot;: {</div>
<div class="line">      &quot;aetitle&quot;: &quot;TestQCTool&quot;,</div>
<div class="line">      &quot;port&quot;: 11112</div>
<div class="line">    },</div>
<div class="line">    &quot;destination&quot;: {</div>
<div class="line">      &quot;aetitle&quot;: &quot;TestDestination&quot;,</div>
<div class="line">      &quot;hostname&quot;: &quot;localhost&quot;,</div>
<div class="line">      &quot;port&quot;: 11113</div>
<div class="line">    },</div>
<div class="line">    &quot;quarentine&quot;: {</div>
<div class="line">      &quot;aetitle&quot;: &quot;TestQuarentine&quot;,</div>
<div class="line">      &quot;hostname&quot;: &quot;localhost&quot;,</div>
<div class="line">      &quot;port&quot;: 11114</div>
<div class="line">    },</div>
<div class="line">    &quot;metadata&quot;: {</div>
<div class="line">        &quot;(0010,0010)&quot;: {</div>
<div class="line">          &quot;tagName&quot;: &quot;PatientName&quot;,</div>
<div class="line">          &quot;vr&quot;: &quot;CS&quot;,</div>
<div class="line">          &quot;description&quot;: &quot;check if patient is called &#39;bob&#39; and change, if so.&quot;,</div>
<div class="line">          &quot;operations&quot;: {</div>
<div class="line">            &quot;EQUAL_1234&quot;: {</div>
<div class="line">                &quot;otherTagString&quot;: &quot;&quot;,</div>
<div class="line">                &quot;value&quot;: &quot;John Doe&quot;,</div>
<div class="line">                &quot;IF_TRUE&quot;: {</div>
<div class="line">                    &quot;OVERWRITE&quot;: {</div>
<div class="line">                        &quot;tag&quot;: &quot;&quot;,</div>
<div class="line">                        &quot;replaceString&quot;: &quot;Robert&quot;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md13"></a>
Explanation</h3>
<p>The ECIQC receives medical images via <b>receiver</b> and sends post-processed images via <b>sender</b>.The key <code>receiver</code> specifies the port number so that another remote sender can identify it and send proper images. The ECIQC pipeline checks the image and send normal images to the <b>destination</b> and suspicious ones to the <b>quarantine</b>. <code>Destination</code> and <code>quarantine</code> tell the ECIQC their addresses.</p>
<p>The key <code>metadata</code> is the main component of the configuration file. You will see long lines of code within this part. Typically, you will see one or more DICOM tags to work on(0010,0010), accompanied by the tag name (Patient Name),vr (data type and format) and a short line of description. The key <code>operations</code> inform the ECIQC what to do with this tag. You can guess with your gut instinct that this configuration file requires the pipeline to replace the name with Robert if the patient name is John Doe.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Receiver, Destination and Quarantine</h2>
<p>As said before, <code>receiver</code> specifies the proper of the ECIQC receiver; <code>destination</code> tells the ECIQC where to send "good" images; <code>quarantine</code> provides the place to send "bad" images. You can use the local port for most test cases. However,if you are interested in communicating between different network nodes in real-world application (e.g. GE Healthcare), please ask your colleagues for more information.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
MetaData</h2>
<p>The key <code>meta</code> usually comprises of one or more DICOM tags to work on. For full list of DICOM tags, please refer to the <a href="https://www.dicomlibrary.com/dicom/dicom-tags/">DICOM library</a>. </p>
<h3><a class="anchor" id="autotoc_md16"></a>
Basic syntax within DICOM tags</h3>
<p>Within each DICOM tag, you need to specify the <code>tagName</code>,<code>vr</code> and <code>description</code>. You can look up the <code>tagName</code> and <code>vr</code> in the <a href="https://www.dicomlibrary.com/dicom/dicom-tags/">DICOM library</a>. The <code>description</code> value is written by the user to enhace readibility. Then it comes to the key <code>operations</code>. </p>
<h3><a class="anchor" id="autotoc_md17"></a>
Operation types</h3>
<p>There are typicall three types of operations. 1.. Comparison operations: EQUAL </p>
<h4><a class="anchor" id="autotoc_md18"></a>
Comparison Operators ==,&lt;=,&gt;=</h4>
<h4><a class="anchor" id="autotoc_md19"></a>
Logical Operators NOT, AND, ALL</h4>
<h4><a class="anchor" id="autotoc_md20"></a>
Actions</h4>
<h3><a class="anchor" id="autotoc_md21"></a>
Multiple operations</h3>
<h4><a class="anchor" id="autotoc_md22"></a>
Repeated keys</h4>
<h3><a class="anchor" id="autotoc_md23"></a>
Nested operations</h3>
<h3><a class="anchor" id="autotoc_md24"></a>
Miscellaneous</h3>
<h4><a class="anchor" id="autotoc_md25"></a>
Operations cheat sheet</h4>
<h2><a class="anchor" id="autotoc_md26"></a>
Presentation context and transfer syntax</h2>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
