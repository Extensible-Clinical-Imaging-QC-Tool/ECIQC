# ECIQC document (17th March 2023)

This is a document for the ECIQC project. It summarises the work done by the 2020 and 2021 cohort, features added by the 2022 cohort (October 2022 to March 2023), work plans for the second half of the year.

### Contents
* Background
* Work by the 2020 and 2021 cohort 
* New features by the 2022 cohort
* Work plans
* Details of different branches and issues

### New features by the 2022 cohort
When we took on this project, we had only a vague idea on how the pipeline actually work, and none of us had any experience working c++! A lot of ideas went around on what we should do! As time went by, with the help of Martin, Chris, Ian, Julia and Emmanuel, we had a clear road map:

> --> create a logging system for each part
> 
> --> build up the whole pipeline
>    
> --> test the whole pipeline under different cases
>    
> --> debug and improve

Now let's dive deep into each part, and see what we've already done.

#### Step1: Create a logging system

Logging is an important part in modern software engineering, and it helps us get familiar with the code. So we started with adding the logger. Martin taught us how to set up the [DCMTK logger file](./src/logging.cpp). Then we were able to set up the logger by writing
```
set_root_logging("./result/pipeline_root_test.log", true);
```

in the [main function](./exe/qctool.cpp). After that, we could simply add the logging in any part of the codes we were interested in by writing something like
```
OFLOG_ERROR(get_logger(), "Some checks failed!");
```

The `get_logger()` is a function in the [DCMTK logger file](./src/logging.cpp). You can put in any information as the second argument. **Remember** to `#include "logging.hpp"` when you intend to using logging. Also, DTMCK logging system has [five levels of logging severity](https://support.dcmtk.org/docs-dcmrt/classOFLogger.html).

Here's an example of our logger file afterwards (line 1-10).
>INFO - Receiver starts to work!
>
>SCP Port: 11112
>
>title: SCP
>
>INFO - Parser start to work. We're in the processing pipeline!
>
>DEBUG - The key we're working on: (0008,0060)
>
>DEBUG - Process description: "check if modality is MR and manufacturer is 'SIEMENS' or 'HITACHI':"
>
>ERROR - Some checks failed!
>
>INFO - Parser worked finished!
>
>INFO - The parser has finished! Sent to quarantine!

In applications, we need to create a **separate** logger file for **each** image, and one logging file for the general pipeline. This is work in progress. Please refer to #73  
### Work plans

### Details of different branches and issues
#### #73: 
